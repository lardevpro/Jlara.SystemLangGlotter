<app-tab></app-tab>
<div class="assistant-container">
  <h1>Pr谩ctica de Pronunciaci贸n</h1>

  <!-- Contenedor principal con layout horizontal -->
  <div class="layout-container">
    <!-- Informaci贸n del usuario -->
    <div class="user-info">
      <div class="user-details">
        <img class="user-avatar" [src]="user.image" alt="User Avatar" />
        <div>
          <p><strong>Usuario:</strong> {{ user.name }}</p>
          <p><strong>Nivel:</strong> {{ user.level }}</p>
          <div class="progress-container">
            <p><strong>Progreso:</strong> {{ progress }}%</p>
            <div class="progress-bar">
              <div
                class="progress-bar-fill"
                [style.width]="progress + '%'">
              </div>
            </div>
          </div>
          <p><strong>Aciertos:</strong> {{ correctAnswers }}</p>
          <p><strong>Fallos:</strong> {{ incorrectAnswers }}</p>
        </div>
      </div>
    </div>

    <!-- Palabra y controles -->
    <div class="word-section">
      <h4>Palabra a pronunciar:</h4>
      <p class="word">{{ currentWord }}</p>
      
      <!-- Bot贸n din谩mico -->
      <ng-container *ngIf="!isLevelCompleted; else levelCompleted">
        <button (click)="startRecording()"> Iniciar Grabaci贸n</button>
      </ng-container>
      <ng-template #levelCompleted>
        <button class="level-complete-btn" (click)="navigateToProgress()">★ Ir a Progreso</button>
      </ng-template>
      
      <div class="timer">
        <p><strong>Tiempo Practicando:</strong> {{ timer }}s</p>
      </div>
    </div>

    <!-- Feedback -->
    <div class="feedback-section">
      <h3>Feedback</h3>
      <div class="feedback-content">
        <textarea
          class="feedback-box"
          rows="4"
          cols="40"
          readonly
          [value]="feedback"></textarea>
        <img
          class="feedback-avatar"
          [src]="avatarState"
          alt="Feedback Avatar" />
        <button class="play-feedback" (click)="playFeedback()" aria-label="Reproducir Feedback"> Escuchar Feedback</button>
      </div>
    </div>
  </div>
</div>